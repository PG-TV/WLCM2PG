<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PG-TV | SQUEEZETAPE</title>

<script>
/* === REDIRECT LOGIC === 
   Routes to Tetanus on the 5th visit
*/
(function() {
    const VISIT_KEY = 'sq_visit_counter';
    const REDIRECT_URL = "https://pg-tv.github.io/TETANUS/"; 
    let visits = parseInt(localStorage.getItem(VISIT_KEY)) || 0;
    visits++;
    if (visits >= 5) {
        localStorage.setItem(VISIT_KEY, 0);
        window.location.href = REDIRECT_URL;
    } else {
        localStorage.setItem(VISIT_KEY, visits);
    }
})();
</script>

<link rel="icon" type="image/svg+xml"
href='data:image/svg+xml;utf8,
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 80">
<path fill="none" stroke="white" stroke-width="2.2" d="M12 20 q20-20 40 0 v40 h-40z"/>
<text x="32" y="50" text-anchor="middle" font-family="Courier,monospace" font-size="18" fill="white" font-weight="700">S</text>
</svg>'>

<style>
:root{
  --bg1:#000; --bg2:#041226; --bg3:#2b0038;
  --accent-cyan:rgba(0,255,234,0.12);
  --accent-magenta:rgba(255,45,149,0.08);
  --white:#fff;
}

html,body{
  height:100%; margin:0;
  background:linear-gradient(180deg,var(--bg1)0%,var(--bg2)35%,var(--bg3)100%);
  overflow:hidden; font-family:Courier,monospace; color:var(--white);
}

/* === Layout === */
.wrap{
  position:relative; z-index:2; min-height:100vh;
  display:flex; align-items:center; justify-content:center;
  flex-direction:column; gap:28px; padding:40px;
}

/* === P + G ICONS === */
.icon-container{ display:flex; gap:120px; align-items:center; justify-content:center; z-index:6; }
button.icon-btn{ width:140px;height:180px;display:block;position:relative; cursor:pointer;background:transparent;border:none;padding:0; }
svg.icon-svg{width:100%;height:100%;position:relative;z-index:6;overflow:visible;}
.shape-path{fill:none;stroke:#fff;stroke-width:2.2;stroke-linejoin:round;stroke-linecap:round;}
.shape-text{fill:#fff;font-weight:700;font-family:Courier,monospace;font-size:18px;dominant-baseline:middle;text-anchor:middle;}
.outline-left{stroke:rgba(0,0,255,0.9);filter:blur(.6px);mix-blend-mode:screen;animation:osc1 2.6s infinite ease-in-out;}
.outline-right{stroke:rgba(255,59,59,0.9);filter:blur(.6px);mix-blend-mode:screen;animation:osc2 1.8s infinite ease-in-out;}
@keyframes osc1{0%{transform:translateX(-3px)translateY(-1px)}50%{transform:translateX(2px)translateY(1px)}100%{transform:translateX(-3px)translateY(-1px)}}
@keyframes osc2{0%{transform:translateX(3px)translateY(2px)}50%{transform:translateX(-2px)translateY(-1px)}100%{transform:translateX(3px)translateY(2px)}}

/* === VHS FX === */
#staticNoise{position:fixed;inset:0;z-index:40;pointer-events:none;mix-blend-mode:screen;opacity:.16;
background-image:url("https://media.giphy.com/media/oEI9uBYSzLpBK/giphy.gif");background-size:cover;animation:moveStatic .18s steps(2) infinite;}
@keyframes moveStatic{from{background-position:0 0}to{background-position:100% 100%}}
#scanlines{position:fixed;inset:0;z-index:42;pointer-events:none;background:repeating-linear-gradient(to bottom,rgba(255,255,255,0.03)0,rgba(255,255,255,0.03)1px,transparent 2px,transparent 4px);
opacity:.22;mix-blend-mode:overlay;animation:scanlineShift 5.8s linear infinite;}
@keyframes scanlineShift{0%{background-position:0 0}100%{background-position:0 8px}}
#flickerBars{position:fixed;inset:0;z-index:43;pointer-events:none;background:linear-gradient(180deg,rgba(255,255,255,0.14),transparent 50%,rgba(255,255,255,0.14));
mix-blend-mode:overlay;opacity:.06;animation:flicker 2.2s infinite;}
@keyframes flicker{0%,100%{opacity:.04}50%{opacity:.16}}

/* === FLOATING TV === */
.tv-wrap{
  position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
  z-index:80; width:240px; height:135px; background:#000;
  border:2px solid rgba(255,255,255,0.08); box-shadow:0 4px 25px rgba(0,0,0,0.6);
  overflow:hidden; transition:box-shadow .3s ease;
}
.tv-wrap.glow{box-shadow:0 0 25px rgba(255,255,255,0.4),0 0 60px rgba(0,255,234,0.25);}
.tv-screen{width:100%;height:100%;object-fit:cover;background:#000;}
.tv-overlay{position:absolute;inset:0;pointer-events:none;background:repeating-linear-gradient(to bottom,rgba(255,255,255,0.02)0,rgba(255,255,255,0.02)1px,transparent 2px,transparent 4px);mix-blend-mode:overlay;z-index:86;}

/* CHANNEL STATIC EFFECT */
.tv-static-glitch {
  position: absolute; inset: 0; 
  background: url("https://media.giphy.com/media/oEI9uWUPr9WUM/giphy.gif");
  background-size: cover; opacity: 0; pointer-events: none; z-index: 85;
  transition: opacity 0.05s ease;
}

@media(max-width:600px){.tv-wrap{width:160px;height:90px;}.icon-container{gap:46px;flex-direction:column;}.cursor{width:120px;height:120px;}}

/* === Cursor + Stars === */
.cursor{position:fixed;left:0;top:0;width:160px;height:160px;border-radius:50%;pointer-events:none;z-index:100;mix-blend-mode:screen;
transform:translate(-50%,-50%) scale(.8);transition:transform .05s linear;filter:blur(6px);}
.cursor .ring{position:absolute;inset:0;border-radius:50%;background:radial-gradient(circle at 35% 30%,rgba(0,255,234,0.45),transparent 20%),
radial-gradient(circle at 70% 70%,rgba(255,45,149,0.25),transparent 18%);animation:ringJitter .9s infinite;}
.cursor .noise{position:absolute;inset:12px;border-radius:50%;background-image:radial-gradient(circle,rgba(255,255,255,0.06),transparent 2px);
mix-blend-mode:overlay;opacity:.9;animation:noiseFloater .06s steps(2) infinite;}
@keyframes ringJitter{0%{transform:scale(1)}25%{transform:scale(.98)}50%{transform:scale(1.03)}75%{transform:scale(.97)}100%{transform:scale(1)}}
@keyframes noiseFloater{0%{transform:translateY(0)}100%{transform:translateY(-2px)}}
#stars{position:fixed;inset:0;z-index:1;pointer-events:none;overflow:hidden;}
.star{position:absolute;width:2px;height:2px;border-radius:50%;background:#fff;opacity:.85;filter:drop-shadow(0 0 6px rgba(255,255,255,0.06));}
.star.tiny{width:1px;height:1px;opacity:.7;filter:none;}

/* === Boot Screen Styling === */
#bootScreen {
  position: fixed; inset: 0; background: #000; color: #00ff66;
  font-family: 'Courier New', Courier, monospace; font-size: 1.4rem;
  letter-spacing: 1px; display: flex; align-items: center; justify-content: center;
  z-index: 999; overflow: hidden;
}
#bootText {
  white-space: pre; overflow: hidden; border-right: 2px solid #00ff66;
  animation: typing 2s steps(20,end), blinkCursor .5s step-end infinite alternate;
}
@keyframes typing { from{width:0} to{width:18ch} }
@keyframes blinkCursor { from{border-color:transparent} to{border-color:#00ff66} }
.fadeOut { animation: fadeOut 1s ease forwards, flicker .25s steps(2) 3; }
@keyframes fadeOut { 0% {opacity:1;} 100% {opacity:0;visibility:hidden;} }
#bootScreen::before {
  content:""; position:absolute; inset:0;
  background:repeating-linear-gradient(to bottom, rgba(0,255,102,0.05) 0px, rgba(0,255,102,0.05) 1px, transparent 2px, transparent 4px);
  pointer-events:none; mix-blend-mode:overlay; opacity:.3;
}
</style>
</head>
<body>

<div id="stars"></div>
<div id="staticNoise"></div>
<div id="scanlines"></div>
<div id="flickerBars"></div>

<div id="bootScreen">
  <div id="bootText">&gt; bootinup-bootsup_</div>
</div>

<div class="tv-wrap" id="tvWrap" aria-label="TV">
  <video id="tv" class="tv-screen" playsinline muted loop>
    <source src="./IMG_3838.MOV" type="video/mp4">
  </video>
  <div id="channelStatic" class="tv-static-glitch"></div>
  <div class="tv-overlay"></div>
</div>

<div class="wrap">
  <div class="icon-container">
    <button id="paintBtn" class="icon-btn" aria-label="Paint">
      <svg class="icon-svg" viewBox="0 0 64 80">
        <path class="shape-path outline-left" d="M12 20 q20-20 40 0 v40 h-40z"/>
        <path class="shape-path outline-right" d="M12 20 q20-20 40 0 v40 h-40z"/>
        <path class="shape-path" d="M12 20 q20-20 40 0 v40 h-40z"/>
        <text class="shape-text" x="32" y="50">P</text>
      </svg>
    </button>
    <button id="glueBtn" class="icon-btn" aria-label="Glue">
      <svg class="icon-svg" viewBox="0 0 64 80">
        <path class="shape-path outline-left" d="M28 4h8v8h-8zM24 12h16v8H24zM20 20h24l2 32H18z"/>
        <path class="shape-path outline-right" d="M28 4h8v8h-8zM24 12h16v8H24zM20 20h24l2 32H18z"/>
        <path class="shape-path" d="M28 4h8v8h-8zM24 12h16v8H24zM20 20h24l2 32H18z"/>
        <text class="shape-text" x="32" y="66">G</text>
      </svg>
    </button>
  </div>
</div>

<div class="cursor" id="cursor">
  <div class="ring"></div>
  <div class="noise"></div>
</div>

<audio id="player" preload="auto"></audio>

<script>
/* === AUDIO (REVERSED FROM TETANUS) === */
const audioFiles = [
  "./Frtruck.m4a",
  "./FB Remix.m4a",
  "./Bleep.m4a",
  "./Biebs in the Glue .m4a",
  "./BM AM & PM.m4a"
];

/* === VIDEO PLAYLIST === */
const videoFiles = ["./IMG_3838.MOV", "./MoshUp_0021~2.mp4", "./My Movie 51~2 (2).mp4", "./My Movie 54.mov", "./My Movie 55.mov", "./IMG_3982.mp4", "./PXL_20251026_173711995~2.mp4"];

const player = document.getElementById("player");
const tv = document.getElementById("tv");
const tvWrap = document.getElementById("tvWrap");
const channelStatic = document.getElementById("channelStatic");

let currentTrack = 0;
let currentChannel = 0;
let autoplayAttempted = false;

/* === AUDIO CONTROL === */
function setTrack(index) {
  currentTrack = (index + audioFiles.length) % audioFiles.length;
  player.src = audioFiles[currentTrack];
  player.load();
  player.play().catch(() => {
    window.addEventListener("click", () => player.play(), { once: true });
  });
}
player.addEventListener("ended", () => setTrack(currentTrack + 1));

/* === TV CHANNEL LOGIC WITH STATIC === */
function setChannel(index) {
  channelStatic.style.opacity = "0.8"; 
  setTimeout(() => {
    currentChannel = (index + videoFiles.length) % videoFiles.length;
    tv.pause();
    tv.src = videoFiles[currentChannel];
    tv.load();
    tv.play().catch(()=>{});
    setTimeout(() => { channelStatic.style.opacity = "0"; }, 200);
  }, 150);
}

tvWrap.addEventListener("click", () => {
  tvWrap.classList.add("glow");
  setTimeout(() => tvWrap.classList.remove("glow"), 420);
  setChannel(currentChannel + 1);
});

/* === INITIAL LOAD === */
window.addEventListener("load", () => {
  const bootScreen = document.getElementById("bootScreen");
  setTimeout(() => {
    bootScreen.classList.add("fadeOut");
    setTimeout(() => {
      startTvDrift();
      setTrack(0);
      setChannel(0);
    }, 900);
  }, 2600);
});

/* === TV DRIFT PHYSICS === */
function startTvDrift() {
  let x = (window.innerWidth - tvWrap.offsetWidth) / 2;
  let y = 30;
  let vx = 0.25, vy = 0.18;
  function step() {
    x += vx; y += vy;
    if (x <= 8 || x + tvWrap.offsetWidth >= window.innerWidth - 8) vx *= -1;
    if (y <= 8 || y + tvWrap.offsetHeight >= window.innerHeight - 8) vy *= -1;
    tvWrap.style.left = x + "px";
    tvWrap.style.top = y + "px";
    tvWrap.style.transform = "translate(0,0)";
    requestAnimationFrame(step);
  }
  requestAnimationFrame(step);
}

/* === STARS + CURSOR === */
const starContainer = document.getElementById("stars");
for (let i = 0; i < 120; i++) {
  const s = document.createElement("div");
  s.className = "star";
  s.style.left = Math.random() * 100 + "%";
  s.style.top = Math.random() * 100 + "%";
  starContainer.appendChild(s);
}
document.addEventListener("mousemove", e => {
  const cursor = document.getElementById("cursor");
  cursor.style.left = e.clientX + "px";
  cursor.style.top = e.clientY + "px";
});
</script>
</body>
</html>